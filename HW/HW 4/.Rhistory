who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who6 %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
#
table4a %>%
gather(`1999`, `2000`, key = "year", value = "cases")
preg <- tribble(
~pregnant, ~male, ~female,
"yes", NA, 10,
"no", 20, 12
)
gather(preg, key = "gender", value = "count", -pregnant)
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"),fill = "left")
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"), sep = ",", extra = "merge")
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"), remove =FALSE)
tidy_pets <- tibble::tribble(
~rank, ~pet_type, ~breed,
1L,        NA,    "Boston Terrier",
2L,        NA,    "Retrievers (Labrador)",
3L,        NA,    "Retrievers (Golden)",
4L,        NA,    "French Bulldogs",
5L,        NA,    "Bulldogs",
6L,     "Dog",    "Beagles",
1L,        NA,    "Persian",
2L,        NA,    "Maine Coon",
3L,        NA,    "Ragdoll",
4L,        NA,    "Exotic",
5L,        NA,    "Siamese",
6L,     "Cat",    "American Short"
)
tidy_pets
tidy_pets %>%
fill(pet_type, .direction = "up")
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
#
#
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
code
who
who.tidy %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
#
table4a %>%
gather(`1999`, `2000`, key = "year", value = "cases")
preg <- tribble(
~pregnant, ~male, ~female,
"yes", NA, 10,
"no", 20, 12
)
gather(preg, key = "gender", value = "count", -pregnant)
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"),fill = "left")
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"), sep = ",", extra = "merge")
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"), remove =FALSE)
tidy_pets <- tibble::tribble(
~rank, ~pet_type, ~breed,
1L,        NA,    "Boston Terrier",
2L,        NA,    "Retrievers (Labrador)",
3L,        NA,    "Retrievers (Golden)",
4L,        NA,    "French Bulldogs",
5L,        NA,    "Bulldogs",
6L,     "Dog",    "Beagles",
1L,        NA,    "Persian",
2L,        NA,    "Maine Coon",
3L,        NA,    "Ragdoll",
4L,        NA,    "Exotic",
5L,        NA,    "Siamese",
6L,     "Cat",    "American Short"
)
tidy_pets
tidy_pets %>%
fill(pet_type, .direction = "up")
who.tidy %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who
who.tidy %>% who
tidydata %>% who
tidydata %>%  data = who
tidydata %>%  who
who
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
tidydata %>%  who
who
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
tidydata %>%  who
who
tidydata %>%  who
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(key = "key",
value = "cases",
new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(new_sp_m014:newrel_f65, key = "key", value = "cases", na.rm = TRUE) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(
new_sp_m014:newrel_f65, key = "key",
value = "cases",
na.rm) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(
new_sp_m014:newrel_f65, key = "key",
value = "cases",
na.rm) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#
#
table4a %>%
gather(`1999`, `2000`, key = "year", value = "cases")
preg <- tribble(
~pregnant, ~male, ~female,
"yes", NA, 10,
"no", 20, 12
)
gather(preg, key = "gender", value = "count", -pregnant)
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"),fill = "left")
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"), sep = ",", extra = "merge")
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"), remove =FALSE)
tidy_pets <- tibble::tribble(
~rank, ~pet_type, ~breed,
1L,        NA,    "Boston Terrier",
2L,        NA,    "Retrievers (Labrador)",
3L,        NA,    "Retrievers (Golden)",
4L,        NA,    "French Bulldogs",
5L,        NA,    "Bulldogs",
6L,     "Dog",    "Beagles",
1L,        NA,    "Persian",
2L,        NA,    "Maine Coon",
3L,        NA,    "Ragdoll",
4L,        NA,    "Exotic",
5L,        NA,    "Siamese",
6L,     "Cat",    "American Short"
)
tidy_pets
tidy_pets %>%
fill(pet_type, .direction = "up")
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(
new_sp_m014:newrel_f65, key = "key",
value = "cases",
na.rm) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(
key = "key",
value = "cases",
na.rm) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who
gather(
new_sp_m014:newrel_f65, key = "key",
value = "cases",
na.rm = TRUE) %>%
mutate(
key = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy
who.tidy.group <- who.tidy %>%
group_by(country, year, sex)
who.tidy.group <- who.tidy %>%
group_by(country, year, sex)
who.tidy.group <- who.tidy %>%
group_by(country, year, sex)
who.tidy.group
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungorup()
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(total_cases, aes(x = year, y = total_cases, fill = sex)) +
geom_bar(stat = "identity", position = "stack") +
facet_wrap(~country, ncol = 2)
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group, aes(x = year, y = total_cases, fill = sex)) +
geom_bar(stat = "identity", position = "stack") +
facet_wrap(~country, ncol = 2)
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group, aes(x = year, y = total_cases, color = sex, group = sex)) +
geom_line() +
facet_wrap(~country, ncol = 2) +
labs(x = "Year", y = "Total Cases", color = "Sex")
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group, aes(x = year, y = total_cases, color = sex, group = sex)) +
geom_line()
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group) +
geom_bar(mapping = aes(x = country, y = total_cases))
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group) +
geom_histogram(mapping = aes(x = country, y = total_cases))
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group) +
geom_col(mapping = aes(x = country, y = total_cases))
who.tidy.group <- who.tidy %>%
group_by(country, year, sex) %>%
summarize(total_cases = sum(cases)) %>%
ungroup()
who.tidy.group
ggplot(who.tidy.group) +
geom_col(mapping = aes(x = country, y = total_cases, color = sex))
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy.nomutate <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(key = str_replace(key, "newrel", "new_rel")) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy.nomutate <- who %>%
gather(key = "key", value = "cases", new_sp_m014:newrel_f65, na.rm = TRUE) %>%
separate(key, c("new", "type", "sexage"), sep = "_") %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
who.tidy
who.tidy.nomutate
